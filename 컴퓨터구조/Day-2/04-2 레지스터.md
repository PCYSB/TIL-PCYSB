# 제목 없음

04-2 레지스터

# 레지스터

- CPU 내부의 작은 임시저장 장치
- 프로그램 속 명령어 & 데이터는 실행 전후로 레지스터에 저장
- 때문에 레지스터에 저장된 값만 잘 관찰해도 프로그램의 실행 흐름을 파악할 수 있다.
- 프로그램을 실행할 때 CPU 내에서 무슨 일이 벌어지고 있는지, 어떤 명령어가 어떻게 수행되는지 알 수 있다.

# 반드시 알아야 할 레지스터

CPU 마다 레지스터들이 다르므로 여러 전공 서적에서 중요하게 다루는 레지스터, 많은 CPU가 공통으로 포함하고 있는 여덟 개의 레지스터만 설명
밑에 설명 + 스택포인터,  베이스 레지스터

## 프로그램 카운터

- 메모리에서 가져올 명령어의 주소(메모리에서 읽어 들일 명령어 주소를 저장)를 저장한다.
- 명령어 포인터라고 부르는 CPU도 있다.

## 명령어 레지스터

- 해석할 명령어, 방금 메모리에서 읽어 들인 명령어를 저장하는 레지스터이다.
- 제어장치는 명령어 레지스터 속 명령어를 받아들이고 이를 해석한 뒤 제어 신호를 내보낸다.

## 메모리 주소 레지스터

- 메모리의 주소를 저장하는 레지스터이다.
- CPU가 읽어 들이고자 하는 주소 값을 주소 버스로 보낼 때 메모리 주소 레지스터를 거친다.

## 메모리 버퍼 레지스터

- 메모리와 주고받을 값(데이터와 명령어)을 저장하는 레지스터이다.
- 메모리에 쓰고 싶은 값이나 메모리로부터 전달받은 값은 메모리 버퍼 레지스터에 저장이 된다.

## 범용 레지스터

- 다양하고 일반적인 상황에서 자유롭게 사용할 수 있는 레지스터
- 데이터와 주소를 모두 저장할 수 있다.
- 일반적으로 CPU 내부에는 여러 개의 범용 레지스터들이 있다.

## 플래그 레지스터

- 연산 결과 또는 CPU 상태에 대한 부가적인 정보를 저장하는 레지스터이다.

# 스택 주소 지정 방식

- 스택과 스택 포인터를 이용한 주소 지정 방식이다.
- 스택 포인터는 스택의 꼭대기를 가리키는 레지스터이다. 스택에 마지막으로 저장한 값의 위치를 저장하는 레지스터이다.
- 스택 포인터는 스택의 어디까지 데이터가 채워져 있는지에 대한 표시이다.
- 스택은 메모리 안에 있다. 정확하게는 메모리 안에 스택처럼 사용할 영역이 정해져 있고 이를 **스택 영역**이라고 한다.

# 변위 주소 지정 방식

- 오퍼랜드 필드의 값과 특정 레지스터의 값을 더하여 유효 주소를 얻어내는 주소 지정 방식이다.
- 변위 조소 지정 방식을 사용하는 명령어는 다음 그림과 같이 연산 코드 필드, 레지스터 필드, 오퍼랜드 필드가 있다.
- 오퍼랜드 필드의 주소와 어떤 레지스터를 더하는지에 따라 상대 주소 지정 방식, 베이스 레지스터 주소 지정 방식 등으로 나뉜다.

## 상대 주소 지정 방식

- 오퍼랜드와 프로그램 카운터의 값을 더하여 유효 주소를 얻는 방식이다.
- 예를 들어 오퍼랜드가 -3이었다면 cpu는 읽어 들이기로 한 명령어로부터 세 번째 이전 번지로 접근한다.
- 분기하여 특정 주소의 코드를 실행할 때 사용된다.

## 베이스 레지스터 주소 지정 방식

- 오퍼랜드와 베이스 레지스터의 값을 더하여 유효 주소를 얻는 방식이다.
- 여기서 베이스 레지스터는 기준 주소, 오퍼랜드는 기존 주소로부터 떨어진 거리로서의 역할을 한다.
- 예를들어 베이스 레지스터에 200이라는 값이 있고 오퍼랜드가 50이라면 200번지로 부터 50 떨어진 250으로 접근하라를 의미하는 명령어이다.
- 배열, 구조체 등에서 사용된다.