# 프로토콜, 계층

05 프로토콜

# 통신 규약인 프로토콜

- 네트워크에서 프로토콜은 통신 규약을 의미한다.
- 통신할 데이터의 구성, 데이터를 확실하게 주고받는 각종 결정 사항과 기준에 정의 되어있다.
- 네트워크로 데이터를 주고 받기 위해서는 송신 측 과 수신 측이 서로를 인식하고 있어야 한다.

## 프로토콜의 목적

- **효율적인 통신**
    - 데이터의 압축을 통해 데이터의 크기를 줄이거나, 불필요한 정보를 제거, 중복된 부분은 대표 심볼로 대체 함으로써 데이터 전송 효율을 높인다.
    - 수신자가 송신자로부터 데이터를 수용할 수 있는 속도에 맞춰 데이터를 전송
- **상호운용성**
    - 다양한 장치 및 플랫폼 소프트웨어 간의 상호운용성을 제공, **서로 다른 시스템 간에 데이터를 교환**할 수 있도록한다.
- **신뢰성 확보**
    - 오류 검출, 복구 흐름 제어 등의 메커니즘을 제공함으로서 안정적이고 신뢰성 있는 통신을 가능케 한다.(데이터 신뢰성 보장)
    - 이는 데이터의 누락이나 변질 등 과 같이 데이터의 훼손을 최소화 시킨다.
- **보안**
    - 데이터의 기밀성, 무결성, 인증 등의 보안 기능을 제공
- **확장성**
    - 프로토콜은 시간이 지남에 따라 네트워크의 성장 및 변화에 적응할 수 있도록 설계되어야 한다
    - 새로운 요구 사항이나 기술의 도입에 유연하게 대응할 수 있어야 한다.
- **계층화**
    - 계층화된 프로토콜은 각 계층에서 특정한 기능을 수행
    - 각 계층 간에는 잘 정의된 인터페이스를 통해서 상호작용한다.

## 프로토콜의 종류

여러가지 종류의 프로토콜이 있지만 일부만 간단히 적겠다.

- Ethernet(IEEE)
    - LAN에서 가정 널리 사용되는 프로토콜
- Point-to-Potin Protocol(PPP)
    - 직접적인 연결을 제공하는 프로토콜, 주로 인터넷 접속시 사용
- High-Level Data Link Control(HDLC)
    - WAN과 LAN에서 사용
- HyperText Transfer Protocol(HTTP)
    - 웹 브라우저와 웹 서버 간의 통신 프로토콜

06 네트워크 계층

# 효율적으로 통신하기 위한 계층 구조

실제 우리가 데이터를 기기를 통해 받아 보기까지는 단순해 보이지만 많은 과정이 있다.
하드웨어부터 ipTime 라우터 등을 거치며 데이터를 전송하기에는 다소 힘들어보이는 감이 있다.
때문에 계층을 나누어 이를 처리한다.

## 프로토콜의 구조

밑의 설명에 도움이 되도록 간단하게만 정리

- 헤더: 데이터의 메타정보, 프로토콜에서 필요한 다양한 부가 정보를 포함하는 부분
- 페이로드: 실제 데이터 사용자가 전송하려는 이미지, 동영상, 메시지 같은걸 실질적으로 담고 있는 부분이다.

## 프로토콜 스택의 처리 원리

네트워크에서는 다양한 프로토콜이 사용된다. 이 **프로토콜간의 차이는 프로토콜 스택 이라는 계층 구조를 이용해서 처리**한다.

### 프로토콜 스택

프로토콜 스택이라 하면 데이터를 보내기 위해 거치는 **다른 프로토콜과 데이터를 교환하기 위한 방법** 라고 이해할 수 있을것 같다.
우리가 핸드폰으로 간단한 문자를 보낸다고 하여도 데이터는 여러 과정을 거쳐서 상대방에게 보내 진다.
이 과정간에 여러 프로토콜이 있을 것이고 서로 같은 프로토콜이 아닐 수도 있을 것이다. 이를 해결하기 위함 이라고 생각된다.
프로토콜은 각 계층마다 다르기에 상위 계층으로 부터 받은 데이터를 하위 계층으로 전달하고, 하위 계층으로 부터 받은 데이터를 상위 계층으로 전달한다.

과정

- 프로토콜 스택에서 데이터의 흐름은 보통 상향식 으로 이루어진다. (상위계층 -> 하위 계층)
- 하위 계층 프로토콜의 페이로드에 상위 계층의 헤더와 페이로드를 포함 시켜 가며 전달
- 때문에 일반적으로는 스택을 거칠 수록 페이로드의 길이는 길어진다.

![Untitled](%E1%84%91%E1%85%B3%E1%84%85%E1%85%A9%E1%84%90%E1%85%A9%E1%84%8F%E1%85%A9%E1%86%AF,%20%E1%84%80%E1%85%A8%E1%84%8E%E1%85%B3%E1%86%BC%20a2a86460505440ceaccfe72017734833/Untitled.png)

07 네트워크 모델

# 각 기기가 통신하는 계층의 모델

## OSI 참조 모델

- 1977년 제정되어 현재는 OSI 참조 모델을 그대로 구현한 네트워크나 장비는 거의 없다.
    - 큰 틀 자체는 거의 변하지 않았기에 좋은 학습 도구로 이용된다.
- 7계층으로 나뉘어 있다.
- 프로토콜을 계층 구조로 만든 개념
- 네트워크 구성 요소가 계층으로 분리됨으로 시스템을 프로토콜 스택 개념으로 설계 가능
- 현재도 계층을 구분하는 하나의 모델로 이용
- 데이터 송신시에는 상향식(상위 계층부터 하위계층으로), 수신시에는 하향식

![Untitled](%E1%84%91%E1%85%B3%E1%84%85%E1%85%A9%E1%84%90%E1%85%A9%E1%84%8F%E1%85%A9%E1%86%AF,%20%E1%84%80%E1%85%A8%E1%84%8E%E1%85%B3%E1%86%BC%20a2a86460505440ceaccfe72017734833/Untitled%201.png)

## TCP/IP모델

- 인터넷을 기준으로한 네트워크의 통신 모델
- 4계층으로 이루어짐

![Untitled](%E1%84%91%E1%85%B3%E1%84%85%E1%85%A9%E1%84%90%E1%85%A9%E1%84%8F%E1%85%A9%E1%86%AF,%20%E1%84%80%E1%85%A8%E1%84%8E%E1%85%B3%E1%86%BC%20a2a86460505440ceaccfe72017734833/Untitled%202.png)

08 TCP/IP

# 인터넷으로 통신하기 위한 프로토콜

인터넷에서 통신할 때 사용하는 기본 프로토콜이다.
TCP/IP는 통신하는 패킷의 식별자로 IP 주소를 사용하기 때문에 보통 TCP/IP 라고 표현한다
하지만 프로토콜 자체로는 IP, UDP, TCP 프로토콜로 분류된다.

## IP 프로토콜

- IP 주소를 참조하여 데이터 본체를 올바른 목적지에 전송하는 최소한의 절차와 규칙을 규정한다.
- IP 프로토콜 자체는 출발지와 목적지가 적힌 빈 봉투 정도로 생각하자

## UDP 프로토콜

- 데이터를 신속하게 전송하는 비연결형 프로토콜
- 주로 실시간 응용 및 동영상 스트리밍과 같은 상황에서 선호된다.
- **빠른 전송을 중요시**한다, 신뢰성이나 순서의 보장 보다는 빠른 속도가 우선
- 단지 목적지만을 지정해서 전송한다.

## TCP 프로토콜

- **신뢰성 있는 데이터 전송**
- 데이터의 신뢰성과 순서를 보장하며 에러복구를 수행한다.
- 파일전송, 이메일 전송 등 과 같이 데이터의 누락이 없어야 하는 경우 사용

09 IP 주소

# 출발지와 목적지 네트워크를 특정하는 식별자

## IP 주소(IPv4)

- TCP/IP 프로토콜에서 출발지나 목적지를 식별하는 식별자로 사용되는 데이터이다.
- 32비트로된 데이터이며 32비트를 8비트씩 4등분 하여 표시 10진수로 표현시에는 점으로 구분한다
- 대략 43억개 정도를 표현할 수있어 43억개 정도의 주소가 있는 것과 같다.
- 하지만 43억개의 주소공간을 모두 사용할 수 있는 것은 아님 (예약된 주소가 있다던지의 이유로)

## 글로벌 IP 주소와 프라이빗 IP 주소

## 글로벌 IP 주소

- 인터넷 주소로 사용할 수 있는 IP 주소의 주소 공간
- 이 주소를 가진 기기는 인터넷상에서 하나 뿐이다.
- 이 주소를 지정하면 전 세계 기기와 통신할 수 있다.

## 프라이빗 IP 주소

- **인터넷에서 사용하지 못하는 IP주소**
- 인터넷이 직접 연결 되지 않는 LAN 내부 등의 주소 공간에서 사용하는 IP 주소로, 프라이빗 IP 주소라고 한다.
- 인터넷에서 사용하지 않으므로 LAN 마다 중복되지 않게 관리한다면 다른 LAN에서는 같은 IP 주소를 사용해도 상관없다.

10 IPv4/IPv6

# 길이가 다른 IP 주소 2개

## 차이점

- **길이**
    - IPv4는 4옥텟(32비트), IPv6는 16옥텟(128비트)
    - 때문에 IPv4는 약 43억개의 주소만을 나타낼 수 있고 IPv6는 약 340간 개의 주소를 나타낼 수 있다.
- **호환**
    - 둘은 서로 호환성이 없다.
    - 때문에 IPv6와 호환 되는 앱이나 서비스를 이용해야 한다.

## 특징

### IPv6

- 프로토콜 수준에서 암호화 통신이 규정되어 있다.
- MAC 주소를 이용하여 IPv6 주소를 자동으로 생성할 수 있고, 2계층을 포함한 설정 자동화가 가능
- 헤더가 IPv4 보다 단순해서 처리가 간단하다
- 계층 구조가 엄격하여 라우팅 효울이 좋다(주소 체계와 라우팅 구조가 IPv4에 비해 간결하고 효율적으로 설계되어 있다)

### IPv4

- 인터넷의 기본적인 주소(대부분의 서버 및 웹 서비스 등은 IPv4를 기반으로 동작하고있다)
- 신규 발행은 불가능
- 앱에서 패킷 암호화