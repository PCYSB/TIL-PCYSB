11-1 CPU 스케줄링 개요

# 프로세스 우선순위
- 운영체제가 프로세스들에게 공정하고 합리적으로 CPU 자원을 배분하는 것을 CPU 스케줄링이라고 한다.
- CPU 스케줄링은 컴퓨터 성능과도 직결 1)
- 대체로 입출력 작업이 많은 프로세스가 우선순위가 높다. 2)
- **입출력 집중 프로세스**, **CPU 집중 프로세스**가 있다. 3)
- 운영체제는 프로세스마다 우선순위를 부여한다. 4)

> - 프로세스들에게 현명하게 CPU를 배분해야한다. 그렇지 않을 시 반드시 실행되어야 할 프로세스들이 실행되지 못하거나, 당장 급하지 않은 프로세스들만 주로 실행되는 등 무질서한 상태가 발생할 수도 있다. 1)
> - 프로세스는 실행 상태와 대기 상태를 반복하며 실행 되기 때문에(CPU와 입출력장치를 모두 사용하며 실행) 2)
> - 비디오 재생, 디스크 백업 작업등과 같이 입출력 작업이 많은 프로세스(입출력 집중 프로세스), 복잡한 수학 연산, 컴파일, 그래픽 처리 작업을 담당하는 프로세스와 같이 CPU 작업이 많은 프로세스(CPU 집중 프로세스) // 첫 번째의 경우에는 실행 상태 보다는 대기 상태에 더 많이 머무른다, 두 번째의 경우에는 대기 상태 보다는 실행 상태에 더 많이 머무른다. 해당 프로세스들이 모두 동일한 빈도로 CPU를 사용하는 것은 비합리적이다. 입출력 집중 프로세스를 가능한 빨리 실행시켜 입출력장치를 끊임없이 작동시키고 다음 CPU 집중 프로세스에 집중적으로 CPU를 할당 시키는 것이 더 효율적 3)
> - PCB에 우선순위를 명시하고, PCB에 적힌 우선순위를 기준으로 먼저 처리할 프로세스를 결정한다.(우선순위가 높은 프로세스는 더 빨리, 더 자주 실행된다.) 4)

![alt text](<스크린샷 2024-03-29 204104.png>)

# 스케줄링 큐
- 운영체제는 프로세스를 차례대로 줄을 세운다. 이 줄을 **스케줄링 큐**로 구현하고 관리한다. 1)
- 큐에는 **준비 큐**, **대기 큐**가있다. 2)


> - PCB에 우선순위가 적혀 있다고는 하지만 이를 위해 PCB를 뒤적거리는 것은 비효율적이다. 그래서 순서에 맞게 줄을 세운다.(이는 CPU 뿐만 아니라 각각의 자원들 모두 해당된다.) 1)
> - **준비 큐**: CPU를 이용하고 싶은 프로세스들이 서는 줄 2)
> - 준비 상태에 있는 프로세스들의 PCB는 준비 큐에 마지막에 삽입, 큐에 삽입된 순서대로 프로세스를 하나씩 꺼내어 실행하되 그중 우선순위가 높은 프로세스를 먼저 실행한다. 2)
> - **대기 큐**: 입출력장치를 이용하기 위해 대기 상태에 접어든 프로세스들이 서는 줄 2)
> - 대기 큐도 준비 큐와 마찬가지 이다. 2)

![alt text](<스크린샷 2024-03-29 205535.png>)

![alt text](<스크린샷 2024-03-29 205254.png>)

![alt text](<스크린샷 2024-03-29 205753.png>)


# 선점형과 비선점형 스케줄링
- 선점형 스케줄링(대부분의 운영체제) 1)
- 비선점형 스케줄링 2)


> - CPU를 비롯한 자원을 사용하고 있더라도 운영체제가 프로세스로부터 자원을 강제로 빼앗아 다른 프로세스에 할당할 수 있는 스케줄링 방식 1)
> - 프로세스마다 정해진 시간만큼 CPU를 사용하고, 정해진 시간을 모두 소비하여 타이머 인터럽트가 발생하면 운영체제가 해당 프로세스로부터 CPU 자원을 빼앗아 다음 프로세스에 할당하는 방식 1)
> - 급한 프로세스가 언제든 끼어들어 사용할 수 있으므로 어느 한 프로세스의 자원 독점을 막고 프로세스들에 골고루 자원 배분이 가능한 장점 1)
> - 그만큼 문맥 교환 과정에서 오버헤드가 발생할 수 있다. 1)
> - 하나의 프로세스가 자원을 사용하고 있다면 그 프로세스가 종료되거나 스스로 대기 상태에 접어들기 전까진 다른 프로세스가 끼어들 수 없는 스케줄링 방식 2)
> - 문맥 교환의 횟수가 선점형 스케줄링보다 적기 때문에 문맥 교환에서 발생하는 오버헤드가 선점형 보다는 적음, 대신 프로세스가 자원 사용중일 시 당장 자원을 사용해야 하는 상황에도 기다릴수 밖에 없다. 2)



정리
CPU는 우선순위가 높은 프로세스 부터 할당하며 여기서의 우선순위은 CPU를 적게 사용하는 프로세스와 급한 프로세스
PCB에 우선순위를 등록
등록된 우선순위를 기반으로 준비 큐에 대기 큐에 줄을 세워 실행한다.